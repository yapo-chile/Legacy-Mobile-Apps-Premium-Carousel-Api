<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>infrastructure - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../lib/godoc/style.css">

<link rel="stylesheet" href="../../lib/godoc/jquery.treeview.css">
<script type="text/javascript">window.initFuncs = [];</script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:30303/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:30303/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:30303/search">
<div id="menu">
<a href="http://localhost:30303/doc/">Documents</a>
<a href="http://localhost:30303/pkg/">Packages</a>
<a href="http://localhost:30303/project/">The Project</a>
<a href="http://localhost:30303/help/">Help</a>

<a href="http://localhost:30303/blog/">Blog</a>


<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package infrastructure
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script type='text/javascript'>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.mpi-internal.com/Yapo/goms/pkg/infrastructure"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package infrastructure is where all the outside world communications resides.
We don&#39;t speak application language here. In fact, we don&#39;t care what the
application is, at this level.
</p>
<p>
Infrastructure layer abstracts away the outside world and allows for the
application to be tested in isolation. It also allows to minimize the effort
of replacing one external component by another, as all possible interactions
from anywhere else are located only on the outermost layer. No business logic
must be impacted by such change.
</p>
<h3 id="hdr-What_lives_here">What lives here</h3>
<p>
Any code that communicates at low level with the outside world belongs to the
infrastructure layer. Some examples are: Environment variables, handling files,
database drivers, network connections.
</p>
<h3 id="hdr-Rules_of_the_road">Rules of the road</h3>
<p>
If you didn&#39;t write it and you&#39;re talking to it, you need code here.
If you need to know where is it, you need code here.
</p>

			</div>
		</div>
		

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#LoadFromEnv">func LoadFromEnv(data interface{})</a></dd>
			
				
				<dd><a href="index.html#MakeYapoLogger">func MakeYapoLogger(config *LoggerConf) (loggers.Logger, error)</a></dd>
			
			
				
				<dd><a href="index.html#Config">type Config</a></dd>
				
				
			
				
				<dd><a href="index.html#LoggerConf">type LoggerConf</a></dd>
				
				
			
				
				<dd><a href="index.html#NewRelicConf">type NewRelicConf</a></dd>
				
				
			
				
				<dd><a href="index.html#NewRelicHandler">type NewRelicHandler</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewRelicHandler.Start">func (n *NewRelicHandler) Start() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewRelicHandler.TrackHandlerFunc">func (n *NewRelicHandler) TrackHandlerFunc(pattern string, handler http.HandlerFunc) http.HandlerFunc</a></dd>
				
			
				
				<dd><a href="index.html#Route">type Route</a></dd>
				
				
			
				
				<dd><a href="index.html#RouterMaker">type RouterMaker</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#RouterMaker.NewRouter">func (maker *RouterMaker) NewRouter() *mux.Router</a></dd>
				
			
				
				<dd><a href="index.html#Routes">type Routes</a></dd>
				
				
			
				
				<dd><a href="index.html#ServiceConf">type ServiceConf</a></dd>
				
				
			
				
				<dd><a href="index.html#WrapperFunc">type WrapperFunc</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="pkg/infrastructure/config.go">config.go</a>
			
				<a href="pkg/infrastructure/doc.go">doc.go</a>
			
				<a href="pkg/infrastructure/newrelic.go">newrelic.go</a>
			
				<a href="pkg/infrastructure/router.go">router.go</a>
			
				<a href="pkg/infrastructure/yapoLogger.go">yapoLogger.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		<div id="pkg-callgraph" class="toggle" style="display: none">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Internal Call Graph section">Internal call graph ▹</h2>
		</div> <!-- .expanded -->
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Internal Call Graph section">Internal call graph ▾</h2>
			<p>
			  In the call graph viewer below, each node
			  is a function belonging to this package
			  and its children are the functions it
			  calls&mdash;perhaps dynamically.
			</p>
			<p>
			  The root nodes are the entry points of the
			  package: functions that may be called from
			  outside the package.
			  There may be non-exported or anonymous
			  functions among them if they are called
			  dynamically from another package.
			</p>
			<p>
			  Click a node to visit that function's source code.
			  From there you can visit its callers by
			  clicking its declaring <code>func</code>
			  token.
			</p>
			<p>
			  Functions may be omitted if they were
			  determined to be unreachable in the
			  particular programs or tests that were
			  analyzed.
			</p>
			<!-- Zero means show all package entry points. -->
			<ul style="margin-left: 0.5in" id="callgraph-0" class="treeview"></ul>
		</div>
		</div> <!-- #pkg-callgraph -->

		
		
		
			
			
			<h2 id="LoadFromEnv">func <a href="pkg/infrastructure/config.go?s=1197:1231#L36">LoadFromEnv</a>
				<a class="permalink" href="index.html#LoadFromEnv">&#xb6;</a>
			</h2>
			<pre>func LoadFromEnv(data interface{})</pre>
			<p>
LoadFromEnv loads the config data from the environment variables
</p>

			
			

		
			
			
			<h2 id="MakeYapoLogger">func <a href="pkg/infrastructure/yapoLogger.go?s=293:356#L2">MakeYapoLogger</a>
				<a class="permalink" href="index.html#MakeYapoLogger">&#xb6;</a>
			</h2>
			<pre>func MakeYapoLogger(config *<a href="index.html#LoggerConf">LoggerConf</a>) (<a href="../interfaces/loggers/index.html">loggers</a>.<a href="../interfaces/loggers/index.html#Logger">Logger</a>, <a href="http://localhost:30303/pkg/builtin/#error">error</a>)</pre>
			<p>
MakeYapoLogger creates and sets up a yapo flavored Logger
</p>

			
			

		
		
			
			
			<h2 id="Config">type <a href="pkg/infrastructure/config.go?s=973:1127#L29">Config</a>
				<a class="permalink" href="index.html#Config">&#xb6;</a>
			</h2>
			<p>
Config holds all configuration for the service
</p>

			<pre>type Config struct {
<span id="Config.ServiceConf"></span>    ServiceConf  <a href="index.html#ServiceConf">ServiceConf</a>  `env:&#34;SERVICE_&#34;`
<span id="Config.NewRelicConf"></span>    NewRelicConf <a href="index.html#NewRelicConf">NewRelicConf</a> `env:&#34;NEWRELIC_&#34;`
<span id="Config.LoggerConf"></span>    LoggerConf   <a href="index.html#LoggerConf">LoggerConf</a>   `env:&#34;LOGGER_&#34;`
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="LoggerConf">type <a href="pkg/infrastructure/config.go?s=368:626#L14">LoggerConf</a>
				<a class="permalink" href="index.html#LoggerConf">&#xb6;</a>
			</h2>
			<p>
LoggerConf holds configuration for logging
LogLevel definition:
</p>
<pre>0 - Debug
1 - Info
2 - Warning
3 - Error
4 - Critic
</pre>

			<pre>type LoggerConf struct {
<span id="LoggerConf.SyslogIdentity"></span>    SyslogIdentity <a href="http://localhost:30303/pkg/builtin/#string">string</a> `env:&#34;SYSLOG_IDENTITY&#34;`
<span id="LoggerConf.SyslogEnabled"></span>    SyslogEnabled  <a href="http://localhost:30303/pkg/builtin/#bool">bool</a>   `env:&#34;SYSLOG_ENABLED&#34; envDefault:&#34;false&#34;`
<span id="LoggerConf.StdlogEnabled"></span>    StdlogEnabled  <a href="http://localhost:30303/pkg/builtin/#bool">bool</a>   `env:&#34;STDLOG_ENABLED&#34; envDefault:&#34;true&#34;`
<span id="LoggerConf.LogLevel"></span>    LogLevel       <a href="http://localhost:30303/pkg/builtin/#int">int</a>    `env:&#34;LOG_LEVEL&#34; envDefault:&#34;0&#34;`
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="NewRelicConf">type <a href="pkg/infrastructure/config.go?s=751:921#L23">NewRelicConf</a>
				<a class="permalink" href="index.html#NewRelicConf">&#xb6;</a>
			</h2>
			<p>
NewRelicConf holds configuration to report to New Relic
TODO: You need to set the defaults according to your service
</p>

			<pre>type NewRelicConf struct {
<span id="NewRelicConf.Key"></span>    Key     <a href="http://localhost:30303/pkg/builtin/#string">string</a> `env:&#34;KEY&#34; envDefault:&#34;923864cba2f12410aff39279cddfd339a07f13a3&#34;`
<span id="NewRelicConf.Appname"></span>    Appname <a href="http://localhost:30303/pkg/builtin/#string">string</a> `env:&#34;APPNAME&#34; envDefault:&#34;yapo-goms-poya&#34;`
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="NewRelicHandler">type <a href="pkg/infrastructure/newrelic.go?s=162:255#L1">NewRelicHandler</a>
				<a class="permalink" href="index.html#NewRelicHandler">&#xb6;</a>
			</h2>
			<p>
NewRelicHandler struct representing a NewRelic handler with the new relic app
</p>

			<pre>type NewRelicHandler struct {
<span id="NewRelicHandler.Appname"></span>    Appname <a href="http://localhost:30303/pkg/builtin/#string">string</a>
<span id="NewRelicHandler.Key"></span>    Key     <a href="http://localhost:30303/pkg/builtin/#string">string</a>
    <span class="comment">// contains filtered or unexported fields</span>
}</pre>

			

			

			
			
			

			

			
				
				<h3 id="NewRelicHandler.Start">func (*NewRelicHandler) <a href="pkg/infrastructure/newrelic.go?s=298:337#L7">Start</a>
					<a class="permalink" href="index.html#NewRelicHandler.Start">&#xb6;</a>
				</h3>
				<pre>func (n *<a href="index.html#NewRelicHandler">NewRelicHandler</a>) Start() <a href="http://localhost:30303/pkg/builtin/#error">error</a></pre>
				<p>
Start initializes the NewRelicHandler
</p>

				
				
				
			
				
				<h3 id="NewRelicHandler.TrackHandlerFunc">func (*NewRelicHandler) <a href="pkg/infrastructure/newrelic.go?s=546:647#L18">TrackHandlerFunc</a>
					<a class="permalink" href="index.html#NewRelicHandler.TrackHandlerFunc">&#xb6;</a>
				</h3>
				<pre>func (n *<a href="index.html#NewRelicHandler">NewRelicHandler</a>) TrackHandlerFunc(pattern <a href="http://localhost:30303/pkg/builtin/#string">string</a>, handler <a href="http://localhost:30303/pkg/net/http/">http</a>.<a href="http://localhost:30303/pkg/net/http/#HandlerFunc">HandlerFunc</a>) <a href="http://localhost:30303/pkg/net/http/">http</a>.<a href="http://localhost:30303/pkg/net/http/#HandlerFunc">HandlerFunc</a></pre>
				<p>
TrackHandlerFunc instruments an http.HandlerFunc
</p>

				
				
				
			
		
			
			
			<h2 id="Route">type <a href="pkg/infrastructure/router.go?s=238:333#L2">Route</a>
				<a class="permalink" href="index.html#Route">&#xb6;</a>
			</h2>
			<p>
Route stands for an http endpoint description
</p>

			<pre>type Route struct {
<span id="Route.Name"></span>    Name    <a href="http://localhost:30303/pkg/builtin/#string">string</a>
<span id="Route.Method"></span>    Method  <a href="http://localhost:30303/pkg/builtin/#string">string</a>
<span id="Route.Pattern"></span>    Pattern <a href="http://localhost:30303/pkg/builtin/#string">string</a>
<span id="Route.Handler"></span>    Handler <a href="../interfaces/handlers/index.html">handlers</a>.<a href="../interfaces/handlers/index.html#Handler">Handler</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="RouterMaker">type <a href="pkg/infrastructure/router.go?s=729:829#L22">RouterMaker</a>
				<a class="permalink" href="index.html#RouterMaker">&#xb6;</a>
			</h2>
			<p>
RouterMaker gathers route and wrapper information to build a router
</p>

			<pre>type RouterMaker struct {
<span id="RouterMaker.Logger"></span>    Logger      <a href="../interfaces/loggers/index.html">loggers</a>.<a href="../interfaces/loggers/index.html#Logger">Logger</a>
<span id="RouterMaker.Routes"></span>    Routes      <a href="index.html#Routes">Routes</a>
<span id="RouterMaker.WrapperFunc"></span>    WrapperFunc <a href="index.html#WrapperFunc">WrapperFunc</a>
}</pre>

			

			

			
			
			

			

			
				
				<h3 id="RouterMaker.NewRouter">func (*RouterMaker) <a href="pkg/infrastructure/router.go?s=889:938#L29">NewRouter</a>
					<a class="permalink" href="index.html#RouterMaker.NewRouter">&#xb6;</a>
				</h3>
				<pre>func (maker *<a href="index.html#RouterMaker">RouterMaker</a>) NewRouter() *mux.<a href="index.html#Router">Router</a></pre>
				<p>
NewRouter setups a Router based on the provided routes
</p>

				
				
				
			
		
			
			
			<h2 id="Routes">type <a href="pkg/infrastructure/router.go?s=631:656#L19">Routes</a>
				<a class="permalink" href="index.html#Routes">&#xb6;</a>
			</h2>
			<p>
Routes is an array of routes with a common prefix
</p>

			<pre>type Routes []routeGroups</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="ServiceConf">type <a href="pkg/infrastructure/config.go?s=147:219#L3">ServiceConf</a>
				<a class="permalink" href="index.html#ServiceConf">&#xb6;</a>
			</h2>
			<p>
ServiceConf holds configuration for this Service
</p>

			<pre>type ServiceConf struct {
<span id="ServiceConf.Host"></span>    Host <a href="http://localhost:30303/pkg/builtin/#string">string</a> `env:&#34;HOST&#34; envDefault:&#34;:8080&#34;`
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="WrapperFunc">type <a href="pkg/infrastructure/router.go?s=496:576#L16">WrapperFunc</a>
				<a class="permalink" href="index.html#WrapperFunc">&#xb6;</a>
			</h2>
			<p>
WrapperFunc defines a type for functions that wrap an http.HandlerFunc
to modify its behaviour
</p>

			<pre>type WrapperFunc func(pattern <a href="http://localhost:30303/pkg/builtin/#string">string</a>, handler <a href="http://localhost:30303/pkg/net/http/">http</a>.<a href="http://localhost:30303/pkg/net/http/#HandlerFunc">HandlerFunc</a>) <a href="http://localhost:30303/pkg/net/http/">http</a>.<a href="http://localhost:30303/pkg/net/http/#HandlerFunc">HandlerFunc</a></pre>

			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.10.1.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:30303/LICENSE">BSD license</a>.<br>
<a href="http://localhost:30303/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

<!-- TODO(adonovan): load these from <head> using "defer" attribute? -->
<script type="text/javascript" src="../../lib/godoc/jquery.js"></script>
<script type="text/javascript" src="../../lib/godoc/jquery.treeview.js"></script>
<script type="text/javascript" src="../../lib/godoc/jquery.treeview.edit.js"></script>


<script>var goVersion = "go1.10.1";</script>
<script type="text/javascript" src="../../lib/godoc/godocs.js"></script>

</body>
</html>

